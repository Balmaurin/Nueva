(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4517:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(6281),i=s(9376);function n(){var e,t;let{user:s,logout:n,isAuthenticated:o,isLoading:c}=(0,l.a)(),d=(0,i.useRouter)(),[u,h]=(0,r.useState)(!1),[x,m]=(0,r.useState)("overview"),[f,g]=(0,r.useState)([]),[b,p]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[y,w]=(0,r.useState)([]),[N,S]=(0,r.useState)([]),[C,k]=(0,r.useState)([]),[D,E]=(0,r.useState)([]),[A,_]=(0,r.useState)(!1),[I,P]=(0,r.useState)(!1),[T,O]=(0,r.useState)(""),[R,z]=(0,r.useState)(""),[U,F]=(0,r.useState)(null),[M,V]=(0,r.useState)(""),[G,J]=(0,r.useState)(!1),B=useRef(null),[H,q]=(0,r.useState)(null),[K,L]=(0,r.useState)(""),[Q,W]=(0,r.useState)(!1),[X,Y]=(0,r.useState)({theme:"dark",language:"es",notifications:!0,autoSave:!0,soundEnabled:!1}),Z=[{id:"overview",label:"Vista General",icon:"\uD83C\uDFE0",badge:null},{id:"chat",label:"Chat IA",icon:"\uD83D\uDCAC",badge:y.filter(e=>"active"===e.status).length},{id:"training",label:"Entrenamiento",icon:"\uD83C\uDF93",badge:null},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCCA",badge:null},{id:"datasets",label:"Datasets",icon:"\uD83D\uDDC4️",badge:C.length},{id:"metrics",label:"M\xe9tricas",icon:"\uD83D\uDCC8",badge:null},{id:"settings",label:"Configuraci\xf3n",icon:"⚙️",badge:null}];(0,r.useEffect)(()=>{c||o||(console.log("Usuario no autenticado, redirigiendo al login"),d.push("/"))},[o,c,d]),(0,r.useEffect)(()=>{o&&$()},[o]),(0,r.useEffect)(()=>{B.current&&(B.current.scrollTop=B.current.scrollHeight)},[null==U?void 0:U.messages]);let $=async()=>{P(!0);try{await Promise.all([ee(),loadChatSessions(),loadTrainingSessions(),loadDatasets(),loadRecentActivity(),loadNotifications()])}catch(e){console.error("Error cargando datos iniciales:",e)}finally{P(!1)}},ee=async()=>{_(!0);try{let e=await fetch("http://localhost:8000/system/metrics");if(e.ok){let t=await e.json();j(t)}}catch(e){console.error("Error cargando m\xe9tricas:",e)}finally{_(!1)}};return c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-cyan-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Verificando autenticaci\xf3n..."})]})}):o?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex",children:[(0,a.jsxs)("div",{className:"".concat(u?"w-16":"w-64"," bg-white/5 backdrop-blur-lg border-r border-white/10 transition-all duration-300 flex flex-col"),children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"S"})}),!u&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-white font-bold text-lg",children:"Sheily AI"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Dashboard Profesional"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:Z.map(e=>(0,a.jsxs)("button",{onClick:()=>handleSectionChange(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat(x===e.id?"bg-cyan-500/20 border border-cyan-400/50 text-cyan-400":"text-gray-300 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex-1 text-left",children:e.label}),e.badge&&e.badge>0&&(0,a.jsx)("span",{className:"bg-cyan-500 text-white text-xs px-2 py-1 rounded-full",children:e.badge})]})]},e.id))}),(0,a.jsx)("div",{className:"p-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:(null==s?void 0:null===(e=s.username)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})}),!u&&(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-white font-medium truncate",children:null==s?void 0:s.username}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm truncate",children:["Nivel ",(null==s?void 0:s.level)||1]})]}),(0,a.jsx)("button",{onClick:()=>h(!u),className:"text-gray-400 hover:text-white transition-colors",children:u?"→":"←"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white/5 backdrop-blur-lg border-b border-white/10 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:(null===(t=Z.find(e=>e.id===x))||void 0===t?void 0:t.label)||"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["overview"===x&&"Vista general del sistema y actividades recientes","chat"===x&&"Conversaciones con IA especializada por rama","training"===x&&"Sistema de entrenamiento interactivo","analytics"===x&&"An\xe1lisis avanzado de rendimiento","datasets"===x&&"Gesti\xf3n de datasets de entrenamiento","metrics"===x&&"M\xe9tricas del sistema en tiempo real","settings"===x&&"Configuraci\xf3n del sistema y cuenta"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>p(!b),className:"text-gray-400 hover:text-white transition-colors relative",children:["\uD83D\uDD14",f.filter(e=>!e.read).length>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:f.filter(e=>!e.read).length})]}),b&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 w-80 bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 shadow-2xl z-50",children:[(0,a.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Notificaciones"})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:f.map(e=>(0,a.jsx)("div",{className:"p-4 border-b border-white/10 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-lg ".concat("error"===e.type?"text-red-400":"warning"===e.type?"text-yellow-400":"success"===e.type?"text-green-400":"text-blue-400"),children:"error"===e.type?"⚠️":"warning"===e.type?"⚡":"success"===e.type?"✅":"ℹ️"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:e.message}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:formatTimeAgo(e.timestamp)})]})]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:null==s?void 0:s.username}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[(null==s?void 0:s.tokens)||0," tokens"]})]}),(0,a.jsx)("button",{onClick:n,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors font-semibold",children:"Salir"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:renderMainContent()})]})]}):null}},6281:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return n},a:function(){return i}});var a=s(7437),r=s(2265);let l=(0,r.createContext)(void 0),i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},n=e=>{let{children:t}=e,[s,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(o(e),u(e)):d(!1)},[]);let u=async e=>{try{let t=await fetch("http://localhost:8000/api/auth/profile",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e.user)}else localStorage.removeItem("auth_token"),o(null),i(null)}catch(e){console.error("Error verificando token:",e),localStorage.removeItem("auth_token"),o(null),i(null)}finally{d(!1)}},h=async(e,t)=>{try{let s=await fetch("http://localhost:8000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),a=await s.json();if(!s.ok||!a.token)return{success:!1,message:a.message||"Credenciales inv\xe1lidas"};{let{user:e,token:t,message:s}=a;return i(e),o(t),localStorage.setItem("auth_token",t),{success:!0,message:s||"Inicio de sesi\xf3n exitoso"}}}catch(e){return console.error("Error en login:",e),{success:!1,message:"Error de conexi\xf3n"}}},x=async(e,t,s)=>{try{let a=await fetch("http://localhost:8000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:s})}),r=await a.json();if(a.ok&&!r.error)return{success:!0,message:"Usuario registrado exitosamente. Ahora puedes iniciar sesi\xf3n."};return{success:!1,message:r.error||"Error al registrar usuario"}}catch(e){return console.error("Error en registro:",e),{success:!1,message:"Error de conexi\xf3n"}}};return(0,a.jsx)(l.Provider,{value:{user:s,token:n,login:h,register:x,logout:()=>{i(null),o(null),localStorage.removeItem("auth_token")},isLoading:c,isAuthenticated:!!s&&!!n},children:t})}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4517)}),_N_E=e.O()}]);